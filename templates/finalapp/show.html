<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>주소로 장소 표시하기</title>

</head>
<body>
<!--
<p style="margin-top:-12px">
    <em class="link">
        <a href="javascript:void(0);" onclick="window.open('http://fiy.daum.net/fiy/map/CsGeneral.daum', '_blank', 'width=981, height=650')">
            혹시 주소 결과가 잘못 나오는 경우에는 여기에 제보해주세요.
        </a>
    </em>
</p>
-->
<div id="map" style="width:100%;height:350px;"></div>
    <div id="name" style="display: none">
    {% for i in sejong %}
        {{ i.name }}{% if not forloop.last %},{% endif %}
    {% endfor %}
    </div>
    <div id="address" style="display: none">
        {% for i in sejong %}
            {{ i.address }}{% if not forloop.last %},{% endif %}
        {% endfor %}
    </div>
    <div id="name1" style="display: none">
		{% for i in sejong %}
            <li>{{ i.name }}</li>
        {% endfor %}
	</div>
	<div id="address1" style="display: none">
		{% for i in sejong %}
            <li>{{ i.address }}</li>
        {% endfor %}
	</div>



<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=65ebde6ef56b62ee5550e04abf379f36&libraries=services"></script>

<script type="text/javascript">
var mapContainer = document.getElementById('map'), // 지도를 표시할 div
    mapOption = {
        center: new kakao.maps.LatLng(36.5331357, 127.2454549), // 지도의 중심좌표
        level: 9 // 지도의 확대 레벨
    };

    //var name1 = JSON.parse(document.getElementById('name').innerText);
    // name1은 이제 JSON 형식의 데이터를 가지게 됩니다

    // 예를 들어, name1이 JSON 형식일 때, 이후 코드에서 필요한 데이터를 가져올 수 있습니다
    //for (var i = 0; i < name1.length; i++) {
     //   var address = name1[i].address;
      //  var name = name1[i].name;
//var name1 = document.getElementById('name').innerHTML.trim()
//var name1 = document.getElementById('name').innerText.split(',');
//var address1 = document.getElementById('address').innerText.split(',');
//var sejong = JSON.parse({{ sejongs_js | escapejs }});
//var sejonglist = {{ sejong | safe }};
var names = document.getElementById('name').innerText.split(',');
var addresses= document.getElementById('address').innerText.split(',');

var map = new kakao.maps.Map(mapContainer, mapOption);

// 주소-좌표 변환 객체를 생성합니다
var geocoder = new kakao.maps.services.Geocoder();

//주소로 좌표검색
        geocoder.addressSearch(addresses[0], function(result, status) {

            // 정상적으로 검색이 완료됐으면
             if (status === kakao.maps.services.Status.OK) {

                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                // 결과값으로 받은 위치를 마커로 표시합니다
                var marker = new kakao.maps.Marker({
                    map: map,
                    position: coords
                });

                // 인포윈도우로 장소에 대한 설명을 표시합니다
                var infowindow = new kakao.maps.InfoWindow({
                    content: '<div style="width:150px;text-align:center;padding:6px 0;">' + names[0] + ' </div>'
                });
                infowindow.open(map, marker);

                // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                map.setCenter(coords);
             }
        });

</script>
</body>
</html>